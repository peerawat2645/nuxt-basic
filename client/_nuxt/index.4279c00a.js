import{_ as b}from"./nuxt-link.614f79c5.js";import{u as c}from"./fetch.7981d610.js";import{_ as g,o as l,c as d,a as t,g as x,v as k,b as u,w as p,d as _,F as m,r as y,t as i,p as I,e as v}from"./entry.443499a3.js";const w={data(){return{items:[],currentPage:1,itemsPerPage:5,searchTerm:""}},computed:{paginatedItems(){const e=(this.currentPage-1)*this.itemsPerPage,a=e+this.itemsPerPage;return this.items.slice(e,a)},totalPages(){return Math.ceil(this.items.length/this.itemsPerPage)}},created(){this.fetchDataAll()},methods:{nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchData())},prevPage(){this.currentPage>1&&(this.currentPage--,this.fetchData())},async fetchData(){try{const{data:e}=await c(`http://localhost:8080/api/books/?page=${this.currentPage}`,"$Y8BpiqNbWS");this.items=e}catch(e){console.error(e)}},async fetchDataAll(){try{const{data:e}=await c("http://localhost:8080/api/books/","$cppSqXRrp2");this.items=e,console.log(Math.ceil(this.items.length/this.itemsPerPage))}catch(e){console.error(e)}},editItem(e){this.$router.push(`/books/${e}`)},async deleteItem(e){if(window.confirm("Are you sure you want to delete?"))try{await c(`http://localhost:8080/api/books/delete/${e}`,"$mKYHcmLJlH"),this.fetchData(this.currentPage,this.itemsPerPage)}catch(h){console.error(h)}},async searchItems(){try{const{data:e}=await c(`http://localhost:8080/api/books/?search=${this.searchTerm}`,"$sXIybjjq2u");this.items=e,this.paginatedItems()}catch(e){console.error(e)}}}},C=e=>(I("data-v-a4d626c8"),e=e(),v(),e),D={class:"add-btn-container"},T=C(()=>t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"Description"),t("th",null,"Action")])],-1)),$=["onClick"],S={class:"pagination"},N=["disabled"],A={style:{"font-size":"16px","margin-right":"10px"}},B=["disabled"];function V(e,a,h,f,o,r){const n=b;return l(),d(m,null,[t("div",D,[x(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>o.searchTerm=s),placeholder:"Search..."},null,512),[[k,o.searchTerm]]),t("button",{onClick:a[1]||(a[1]=(...s)=>r.searchItems&&r.searchItems(...s))},"Search"),u(n,{to:"/books/add",class:"custom-link"},{default:p(()=>[_("Add New")]),_:1})]),t("table",null,[T,t("tbody",null,[(l(!0),d(m,null,y(r.paginatedItems,s=>(l(),d("tr",{key:s.id},[t("td",null,i(s.id),1),t("td",null,i(s.name),1),t("td",null,i(s.description),1),t("td",null,[u(n,{to:`/books/${s.id}`,class:"custom-link"},{default:p(()=>[_("Edit")]),_:2},1032,["to"]),t("button",{onClick:j=>r.deleteItem(s.id),class:"delete-link"},"Delete",8,$)])]))),128))])]),t("div",S,[t("button",{onClick:a[2]||(a[2]=(...s)=>r.prevPage&&r.prevPage(...s)),disabled:o.currentPage===1},"Previous",8,N),t("span",A,"Page "+i(o.currentPage),1),t("button",{onClick:a[3]||(a[3]=(...s)=>r.nextPage&&r.nextPage(...s)),disabled:o.currentPage===r.totalPages},"Next",8,B)])],64)}const P=g(w,[["render",V],["__scopeId","data-v-a4d626c8"]]),q={components:{CrudTable:P}},F=t("h1",null,"CRUD Page",-1);function M(e,a,h,f,o,r){const n=P;return l(),d("div",null,[F,u(n)])}const R=g(q,[["render",M]]);export{R as default};
